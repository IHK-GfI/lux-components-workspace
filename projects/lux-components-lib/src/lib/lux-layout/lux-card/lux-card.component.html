<mat-card
  appearance="outlined"
  (click)="clicked($event)"
  (keydown.enter)="clicked($event)"
  (keydown.space)="clicked($event)"
  [attr.tabindex]="!showButtons && hasCardAction && !luxDisabled && luxUseTabIndex ? '0' : null"
  luxTagIdHandler
  [luxTagId]="luxTagId"
  class="lux-card"
  [class.lux-cursor]="!showButtons && hasCardAction && !luxDisabled">
  <mat-card-header class="lux-card-header">
    @if (showIcon) {
    <div class="lux-card-icon-container">
      <ng-content select="lux-icon"></ng-content>
    </div>
    }
    <mat-card-title class="lux-card-title">
      <lux-card-heading
        [luxLevel]="luxHeading"
        [luxText]="luxTitle"
        [luxTitle]="luxTitleTooltip ? luxTitleTooltip : luxTitleLineBreak ? '' : luxTitle"
        [luxClass]="{
          'lux-hyphenate': luxTitleLineBreak,
          'lux-crop': !luxTitleLineBreak,
          'lux-display-none-important': (!luxTitle || luxTitle.length === 0) && !infoComponent
        }"></lux-card-heading>
    </mat-card-title>
    <mat-card-subtitle
      title="{{ luxSubTitleTooltip ? luxSubTitleTooltip : luxTitleLineBreak ? '' : luxSubTitle }}"
      class="lux-card-subtitle"
      [ngClass]="{
        'lux-hyphenate': luxTitleLineBreak,
        'lux-crop': !luxTitleLineBreak,
        'lux-display-none-important': !luxSubTitle || luxSubTitle.length === 0
      }">
      {{ luxSubTitle }}
    </mat-card-subtitle>
    @if (infoComponent) {
    <div class="lux-card-info-container" [class.lux-title]="luxTitle || showIcon" [class.lux-subtitle]="luxSubTitle">
      <ng-content select="lux-card-info"></ng-content>
    </div>
    }
  </mat-card-header>

  <mat-card-content class="lux-card-content" [class.lux-card-no-actions]="!showButtons">
    <div class="lux-card-content-container lux-overflow-y-hidden" [class.lux-card-with-content-and-header]="contentComponent && showHeader">
      <ng-content select="lux-card-content"></ng-content>
      @if (showExpandedToggle) {
      <lux-button
        luxColor="primary"
        [luxIconName]="luxExpanded ? 'lux-interface-arrows-button-up' : 'lux-interface-arrows-button-down'"
        [luxLabel]="
          luxExpanded
            ? luxExpandedLabelClose || ('luxc.card.expandedLabel.close' | transloco)
            : luxExpandedLabelOpen || ('luxc.card.expandedLabel.open' | transloco)
        "
        [luxIconShowRight]="false"
        (luxClicked)="changeContentExpansion($event)"
        [luxThrottleTime]="250"
        luxTagId="expandedButton"
        class="lux-expanded-button"></lux-button>
      }
    </div>

    @if (luxExpanded && contentExpandedComponent) {
    <div class="lux-card-content-expanded lux-mt-4" [@expansionAnim]="{ value: getAnimState(), params: { duration: getAnimDuration() } }">
      <ng-content select="lux-card-content-expanded"></ng-content>
    </div>
    }
  </mat-card-content>

  <mat-card-actions class="lux-card-actions" [ngClass]="{ 'lux-display-none-important': !showButtons }" #luxActionButtons>
    <ng-content select="lux-card-actions"></ng-content>
  </mat-card-actions>
</mat-card>
